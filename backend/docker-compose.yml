version: "3.8"
services:
   code-collab-backend:
      container_name: code-collab-backend
      build:
         context: .
         dockerfile: Dockerfile
         args:
            ASPNETCORE_ENVIRONMENT: Development
      ports:
         - "3003:5009"
      environment:
         ASPNETCORE_ENVIRONMENT: Development
         ASPNETCORE_URLS: http://+:5009
      depends_on:
         - code-collab-database

   code-collab-database:
      container_name: code-collab-database
      image: postgres:16
      ports:
         - "54323:5432"
      environment:
         - POSTGRES_USER=${POSTGRES_USER}
         - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
         - POSTGRES_DB=${POSTGRES_DB}
      volumes:
         - code-collab-data:/var/lib/postgresql/data

volumes:
   code-collab-data:
